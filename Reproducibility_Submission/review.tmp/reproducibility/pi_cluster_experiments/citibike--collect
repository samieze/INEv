#!/bin/bash
SCRIPT_DIR="$(realpath "$(dirname "$0")")"
SRC="/root/publish/inputdata/citibike/results"
DST="$SCRIPT_DIR/results-cb"

for ((i=0;i<10;i++)); do
    rsync -rlptDv --progress "pi$i:$SRC/" "$DST" || exit 1
done

#purge empty .err files
find "$DST" -iname "*.err" -size 0 -exec rm '{}' \;    

#simplify naming of csv files
find "$DST" -iname "*.csv" -exec rename -d 's/(.*)-([0-9]).csv/$2.csv/' {} \;

